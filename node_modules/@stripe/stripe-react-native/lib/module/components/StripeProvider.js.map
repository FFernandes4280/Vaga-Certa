{"version":3,"names":["EXPO_PARTNER_ID","repository","pjson","appInfo","name","shouldAttributeExpo","url","version","partnerId","undefined","initStripe","params","extendedParams","NativeStripeSdk","initialise","StripeProvider","children","publishableKey","merchantIdentifier","threeDSecureParams","stripeAccountId","urlScheme","setReturnUrlSchemeOnAndroid","useEffect","isAndroid"],"sources":["StripeProvider.tsx"],"sourcesContent":["import React, { useEffect } from 'react';\n\nimport NativeStripeSdk from '../NativeStripeSdk';\nimport { isAndroid, shouldAttributeExpo } from '../helpers';\nimport type { AppInfo, InitStripeParams, InitialiseParams } from '../types';\nimport pjson from '../../package.json';\n\nconst EXPO_PARTNER_ID = 'pp_partner_JBN7LkABco2yUu';\n\n/**\n *  Stripe Provider Component Props\n */\nexport type Props = InitStripeParams & {\n  children: React.ReactElement | React.ReactElement[];\n};\n\nconst repository: any = pjson.repository;\n\nconst appInfo: AppInfo = {\n  name: shouldAttributeExpo() ? `${pjson.name}/expo` : pjson.name,\n  // package.json output installed via npm is a bit different than from yarn\n  // the repository field can be an object or string\n  // for more context: https://github.com/stripe/stripe-react-native/issues/200\n  url: repository.url || repository,\n  version: pjson.version,\n  partnerId: shouldAttributeExpo() ? EXPO_PARTNER_ID : undefined,\n};\n\nexport const initStripe = async (params: InitStripeParams): Promise<void> => {\n  const extendedParams: InitialiseParams = { ...params, appInfo };\n  NativeStripeSdk.initialise(extendedParams);\n};\n\n/**\n *  StripeProvider Component\n *\n * @example\n * ```ts\n *  <StripeProvider\n *    publishableKey=\"_publishableKey\"\n *    merchantIdentifier=\"merchant.com.stripe.react.native\"\n *    threeDSecureParams={{\n *      backgroundColor: \"#FFF\",\n *      timeout: 5,\n *    }}\n *  >\n *    <App />\n *  </StripeProvider>\n * ```\n * @param __namedParameters Props\n * @returns JSX.Element\n * @category ReactComponents\n */\nexport function StripeProvider({\n  children,\n  publishableKey,\n  merchantIdentifier,\n  threeDSecureParams,\n  stripeAccountId,\n  urlScheme,\n  setReturnUrlSchemeOnAndroid,\n}: Props) {\n  useEffect(() => {\n    if (!publishableKey) {\n      return;\n    }\n    if (isAndroid) {\n      NativeStripeSdk.initialise({\n        publishableKey,\n        appInfo,\n        stripeAccountId,\n        threeDSecureParams,\n        urlScheme,\n        setReturnUrlSchemeOnAndroid,\n      });\n    } else {\n      NativeStripeSdk.initialise({\n        publishableKey,\n        appInfo,\n        stripeAccountId,\n        threeDSecureParams,\n        merchantIdentifier,\n        urlScheme,\n      });\n    }\n  }, [\n    publishableKey,\n    merchantIdentifier,\n    stripeAccountId,\n    threeDSecureParams,\n    urlScheme,\n    setReturnUrlSchemeOnAndroid,\n  ]);\n\n  return <>{children}</>;\n}\n"],"mappings":"8SAAA,qDAEA,2EACA,mCAEA,sEAAuC,0/BAEvC,GAAMA,gBAAe,CAAG,2BAA2B,CASnD,GAAMC,WAAe,CAAGC,gBAAK,CAACD,UAAU,CAExC,GAAME,QAAgB,CAAG,CACvBC,IAAI,CAAE,GAAAC,4BAAmB,GAAE,CAAMH,gBAAK,CAACE,IAAI,SAAUF,gBAAK,CAACE,IAAI,CAI/DE,GAAG,CAAEL,UAAU,CAACK,GAAG,EAAIL,UAAU,CACjCM,OAAO,CAAEL,gBAAK,CAACK,OAAO,CACtBC,SAAS,CAAE,GAAAH,4BAAmB,GAAE,CAAGL,eAAe,CAAGS,SACvD,CAAC,CAEM,GAAMC,WAAU,oDAAG,UAAOC,MAAwB,CAAoB,CAC3E,GAAMC,eAAgC,kBAAQD,MAAM,EAAER,OAAO,CAAPA,OAAO,EAAE,CAC/DU,wBAAe,CAACC,UAAU,CAACF,cAAc,CAAC,CAC5C,CAAC,iBAHYF,WAAU,4CAGtB,CAAC,8BAsBK,QAASK,eAAc,OAQpB,IAPRC,SAAQ,OAARA,QAAQ,CACRC,cAAc,OAAdA,cAAc,CACdC,kBAAkB,OAAlBA,kBAAkB,CAClBC,kBAAkB,OAAlBA,kBAAkB,CAClBC,eAAe,OAAfA,eAAe,CACfC,SAAS,OAATA,SAAS,CACTC,2BAA2B,OAA3BA,2BAA2B,CAE3B,GAAAC,gBAAS,EAAC,UAAM,CACd,GAAI,CAACN,cAAc,CAAE,CACnB,OACF,CACA,GAAIO,kBAAS,CAAE,CACbX,wBAAe,CAACC,UAAU,CAAC,CACzBG,cAAc,CAAdA,cAAc,CACdd,OAAO,CAAPA,OAAO,CACPiB,eAAe,CAAfA,eAAe,CACfD,kBAAkB,CAAlBA,kBAAkB,CAClBE,SAAS,CAATA,SAAS,CACTC,2BAA2B,CAA3BA,2BACF,CAAC,CAAC,CACJ,CAAC,IAAM,CACLT,wBAAe,CAACC,UAAU,CAAC,CACzBG,cAAc,CAAdA,cAAc,CACdd,OAAO,CAAPA,OAAO,CACPiB,eAAe,CAAfA,eAAe,CACfD,kBAAkB,CAAlBA,kBAAkB,CAClBD,kBAAkB,CAAlBA,kBAAkB,CAClBG,SAAS,CAATA,SACF,CAAC,CAAC,CACJ,CACF,CAAC,CAAE,CACDJ,cAAc,CACdC,kBAAkB,CAClBE,eAAe,CACfD,kBAAkB,CAClBE,SAAS,CACTC,2BAA2B,CAC5B,CAAC,CAEF,MAAO,2DAAGN,QAAQ,CAAI,CACxB"}