{"version":3,"names":["CollectionMode","AddressCollectionMode","CaptureMethod"],"sources":["PaymentSheet.ts"],"sourcesContent":["import type { BillingDetails, AddressDetails, CardBrand } from './Common';\nimport type { CartSummaryItem } from './ApplePay';\nimport type {\n  ButtonType,\n  RecurringPaymentRequest,\n  AutomaticReloadPaymentRequest,\n  MultiMerchantRequest,\n} from './PlatformPay';\nimport type { FutureUsage } from './PaymentIntent';\nimport type { Result } from './PaymentMethod';\nimport type { StripeError } from './Errors';\n\nexport type SetupParams = IntentParams & {\n  /** Your customer-facing business name. On Android, this is required and cannot be an empty string. */\n  merchantDisplayName: string;\n  /** The identifier of the Stripe Customer object. See https://stripe.com/docs/api/customers/object#customer_object-id */\n  customerId?: string;\n  /** A short-lived token that allows the SDK to access a Customer’s payment methods. */\n  customerEphemeralKeySecret?: string;\n  /** When set to true, separates out the payment method selection & confirmation steps.\n   * If true, you must call `confirmPaymentSheetPayment` on your own. Defaults to false. */\n  customFlow?: boolean;\n  /** iOS only. Enable Apple Pay in the Payment Sheet by passing an ApplePayParams object.  */\n  applePay?: ApplePayParams;\n  /** Android only. Enable Google Pay in the Payment Sheet by passing a GooglePayParams object.  */\n  googlePay?: GooglePayParams;\n  /** The color styling to use for PaymentSheet UI. Defaults to 'automatic'. */\n  style?: 'alwaysLight' | 'alwaysDark' | 'automatic';\n  /** A URL that redirects back to your app that PaymentSheet can use to auto-dismiss web views used for additional authentication, e.g. 3DS2 */\n  returnURL?: string;\n  /** Configuration for how billing details are collected during checkout. */\n  billingDetailsCollectionConfiguration?: BillingDetailsCollectionConfiguration;\n  /** PaymentSheet pre-populates the billing fields that are displayed in the Payment Sheet (only country and postal code, as of this version) with the values provided. */\n  defaultBillingDetails?: BillingDetails;\n  /**\n   * The shipping information for the customer. If set, PaymentSheet will pre-populate the form fields with the values provided.\n   * This is used to display a \"Billing address is same as shipping\" checkbox if `defaultBillingDetails` is not provided.\n   * If `name` and `line1` are populated, it's also [attached to the PaymentIntent](https://stripe.com/docs/api/payment_intents/object#payment_intent_object-shipping) during payment.\n   */\n  defaultShippingDetails?: AddressDetails;\n  /** If true, allows payment methods that do not move money at the end of the checkout. Defaults to false.\n   *\n   * Some payment methods can’t guarantee you will receive funds from your customer at the end of the checkout\n   * because they take time to settle (eg. most bank debits, like SEPA or ACH) or require customer action to\n   * complete (e.g. OXXO, Konbini, Boleto). If this is set to true, make sure your integration listens to webhooks\n   * for notifications on whether a payment has succeeded or not.\n   */\n  allowsDelayedPaymentMethods?: boolean;\n  /** Customizes the appearance of PaymentSheet */\n  appearance?: AppearanceParams;\n  /** The label to use for the primary button. If not set, Payment Sheet will display suitable default labels for payment and setup intents. */\n  primaryButtonLabel?: string;\n  /** Optional configuration to display a custom message when a saved payment method is removed. iOS only. */\n  removeSavedPaymentMethodMessage?: string;\n  /** The list of preferred networks that should be used to process payments made with a co-branded card.\n   * This value will only be used if your user hasn't selected a network themselves. */\n  preferredNetworks?: Array<CardBrand>;\n  /** By default, PaymentSheet will use a dynamic ordering that optimizes payment method display for the customer.\n   *  You can override the default order in which payment methods are displayed in PaymentSheet with a list of payment method types.\n   *  See https://stripe.com/docs/api/payment_methods/object#payment_method_object-type for the list of valid types.  You may also pass external payment methods.\n   *  - Example: [\"card\", \"external_paypal\", \"klarna\"]\n   *  - Note: If you omit payment methods from this list, they’ll be automatically ordered by Stripe after the ones you provide. Invalid payment methods are ignored.\n   */\n  paymentMethodOrder?: Array<String>;\n  /** This is an experimental feature that may be removed at any time.\n   *  Defaults to true. If true, the customer can delete all saved payment methods.\n   *  If false, the customer can't delete if they only have one saved payment method remaining.\n   */\n  allowsRemovalOfLastSavedPaymentMethod?: boolean;\n};\n\nexport type IntentParams =\n  | {\n      paymentIntentClientSecret: string;\n      setupIntentClientSecret?: undefined;\n      intentConfiguration?: never;\n    }\n  | {\n      setupIntentClientSecret: string;\n      paymentIntentClientSecret?: undefined;\n      intentConfiguration?: never;\n    }\n  | {\n      setupIntentClientSecret?: never;\n      paymentIntentClientSecret?: never;\n      intentConfiguration: IntentConfiguration;\n    };\n\nexport type ApplePayParams = {\n  /** The two-letter ISO 3166 code of the country of your business, e.g. \"US\"  */\n  merchantCountryCode: string;\n  /**\n   * An array of CartSummaryItem item objects that summarize the amount of the payment. If you're using a SetupIntent\n   * for a recurring payment, you should set this to display the amount you intend to charge. */\n  cartItems?: CartSummaryItem[];\n  /** Sets the text displayed by the call to action button in the Apple Pay sheet. */\n  buttonType?: ButtonType;\n  /** A typical request is for a one-time payment. To support different types of payment requests, include a PaymentRequestType. Only supported on iOS 16 and up. */\n  request?:\n    | RecurringPaymentRequest\n    | AutomaticReloadPaymentRequest\n    | MultiMerchantRequest;\n  /** Callback function for setting the order details (retrieved from your server) to give users the\n   * ability to track and manage their purchases in Wallet. Stripe calls your implementation after the\n   * payment is complete, but before iOS dismisses the Apple Pay sheet. You must call the `completion`\n   * function, or else the Apple Pay sheet will hang. */\n  setOrderTracking?: (\n    completion: (\n      orderIdentifier: string,\n      orderTypeIdentifier: string,\n      authenticationToken: string,\n      webServiceUrl: string\n    ) => void\n  ) => void;\n};\n\nexport type GooglePayParams = {\n  /** The two-letter ISO 3166 code of the country of your business, e.g. \"US\"  */\n  merchantCountryCode: string;\n  /** The three-letter ISO 4217 alphabetic currency code, e.g. \"USD\" or \"EUR\". Required in order to support Google Pay when processing a Setup Intent. */\n  currencyCode?: string;\n  /** Whether or not to use the Google Pay test environment.  Set to `true` until you have applied for and been granted access to the Production environment. */\n  testEnv?: boolean;\n  /** An optional label to display with the amount. Google Pay may or may not display this label depending on its own internal logic. Defaults to a generic label if none is provided. */\n  label?: string;\n  /** An optional amount to display for setup intents. Google Pay may or may not display this amount depending on its own internal logic. Defaults to 0 if none is provided. */\n  amount?: string;\n  /** The Google Pay button type to use. Set to \"Pay\" by default. See\n   * [Google's documentation](https://developers.google.com/android/reference/com/google/android/gms/wallet/Wallet.WalletOptions#environment)\n   * for more information on button types. */\n  buttonType?: ButtonType;\n};\n\n/**\n * Used to customize the appearance of your PaymentSheet\n */\nexport type AppearanceParams = RecursivePartial<{\n  /** Describes the appearance of fonts in your PaymentSheet */\n  font: FontConfig;\n  /** Describes the colors in your PaymentSheet. Provide either a base config, or both `light` and `dark` configs, which will be useed based on whether the user is in Light or Dark mode.  */\n  colors:\n    | GlobalColorConfig\n    | { light: GlobalColorConfig; dark: GlobalColorConfig };\n  /** Describes the appearance of shapes in the PaymentSheet, such as buttons, inputs, and tabs. */\n  shapes: {\n    /** The border radius used for buttons, inputs, and tabs in your PaymentSheet.\n     * @default 6.0\n     */\n    borderRadius: number;\n    /** The border width used for inputs and tabs in your PaymentSheet.\n     * @default 1.0\n     */\n    borderWidth: number;\n    /** iOS only. The shadow used for buttons, inputs, and tabs in your PaymentSheet */\n    shadow: ShadowConfig;\n  };\n  /** Describes the appearance of the primary \"Pay\" button at the bottom of your Payment Sheet */\n  primaryButton: PrimaryButtonConfig;\n}>;\n\nexport type FontConfig = {\n  /**\n   * The font used for regular text. PaymentSheet will attempt to use medium and bold versions of this font if they exist.\n   *\n   * On iOS, this should be the \"PostScript name\" found in Font Book after installing the font.\n   * On Android, this should be the name of the font file (containing only lowercase alphanumeric characters) in android/app/src/main/res/font\n   *\n   * @default The OS's system font\n   */\n  family: string;\n  /** The scale factor for all fonts in your PaymentSheet. This value is required to be greater than 0. Font sizes are multiplied by this value before being displayed. For example, setting this to 1.2 increases the size of all text by 20%.\n   * @default 1.0\n   */\n  scale: number;\n};\n\nexport type ShadowConfig = {\n  /** The color of the shadow.\n   * @default \"#000000\"\n   * */\n  color: string;\n  /** The alpha or opacity of the shadow.\n   * @default 0.05\n   */\n  opacity: number;\n  /** The positioning of the shadow relative to the component. For example, a negative x and y will result in a shadow placed below and to the left of the component.\n   * @default {x: 0, y: 2}\n   */\n  offset: { x: number; y: number };\n  /** The blur radius of the shadow.\n   * @default 4\n   */\n  blurRadius: number;\n};\n\nexport type GlobalColorConfig = {\n  /** A primary color used throughout your PaymentSheet, represented as a hex string with format #RRGGBB or #AARRGGBB.\n   * @default The System blue color on iOS, and \"#007AFF\" (light) / \"#0074D4\" (dark) on Android.\n   */\n  primary: string;\n  /** The color used for the background of your PaymentSheet, represented as a hex string with format #RRGGBB or #AARRGGBB.\n   * @default The System background color on iOS, and \"#ffffff\" (light) / \"#2e2e2e\" (dark) on Android.\n   */\n  background: string;\n  /** The color used for the background of inputs, tabs, and other components in your PaymentSheet, represented as a hex string with format #RRGGBB or #AARRGGBB.\n   * @default The System background color (light) / System secondary background color (dark) on iOS, and \"#ffffff\" (light) / \"#a9a9a9\" (dark) on Android.\n   */\n  componentBackground: string;\n  /** The color used for the external border of inputs, tabs, and other components in your PaymentSheet, represented as a hex string with format #RRGGBB or #AARRGGBB.\n   * @default The System gray (3) color on iOS, and \"#33787880\" (light) / \"#787880\" (dark) on Android.\n   */\n  componentBorder: string;\n  /** The color used for the internal border (meaning the border is shared with another component) of inputs, tabs, and other components in your PaymentSheet, represented as a hex string with format #RRGGBB or #AARRGGBB.\n   * @default The System gray (3) color on iOS, and \"#33787880\" (light) / \"#787880\" (dark) on Android.\n   */\n  componentDivider: string;\n  /** The color of the header text in your PaymentSheet, represented as a hex string with format #RRGGBB or #AARRGGBB.\n   * @default The System label color on iOS, and \"#000000\" (light) / \"#ffffff\" (dark) on Android.\n   */\n  primaryText: string;\n  /** The color of the label text of input fields, represented as a hex string with format #RRGGBB or #AARRGGBB.\n   * @default The System seconday label color on iOS, and \"#000000\" (light) / \"#ffffff\" (dark) on Android.\n   */\n  secondaryText: string;\n  /** The color of the input text in your PaymentSheet components, such as the user's card number or zip code, represented as a hex string with format #RRGGBB or #AARRGGBB.\n   * @default \"#000000\"\n   */\n  componentText: string;\n  /** The color of the placeholder text of input fields, represented as a hex string with format #RRGGBB or #AARRGGBB.\n   * @default The System label color on iOS, and \"#99000000\" (light) / \"#99ffffff\" (dark) on Android.\n   */\n  placeholderText: string;\n  /** The color used for icons in your Payment Sheet, such as the close or back icons, represented as a hex string with format #RRGGBB or #AARRGGBB.\n   * @default The System seconday label color on iOS, and \"#99000000\" (light) / \"#ffffff\" (dark) on Android.\n   */\n  icon: string;\n  /** The color used to indicate errors or destructive actions in your Payment Sheet, represented as a hex string with format #RRGGBB or #AARRGGBB.\n   * @default The System red color on iOS, and \"#ff0000\" (light) / \"#ff0000\" (dark) on Android.\n   */\n  error: string;\n};\n\nexport type PrimaryButtonConfig = {\n  /** The font family used specifically for the primary button.\n   * @default The root `appearance.font.family`\n   */\n  font: Pick<FontConfig, 'family'>;\n  /** The colors used specifically for the primary button. Provide either a base config, or both `light` and `dark` configs, which will be useed based on whether the user is in Light or Dark mode.  */\n  colors:\n    | PrimaryButtonColorConfig\n    | { light: PrimaryButtonColorConfig; dark: PrimaryButtonColorConfig };\n  /** Describes the border and shadow of the primary button. */\n  shapes: {\n    /** The border radius used for the primary button in your PaymentSheet\n     * @default The root `appearance.shapes.borderRadius`\n     */\n    borderRadius: number;\n    /** The border width used for the primary button in your PaymentSheet\n     * @default The root `appearance.shapes.borderWidth`\n     */\n    borderWidth: number;\n    /** iOS only. The shadow used for the primary button in your PaymentSheet\n     * @default The root `appearance.shapes.shadow`\n     */\n    shadow: ShadowConfig;\n  };\n};\n\nexport type PrimaryButtonColorConfig = {\n  /** The background color used for the primary button in your PaymentSheet, represented as a hex string with format #RRGGBB or #AARRGGBB.\n   * @default The root `appearance.colors.primary`\n   */\n  background: string;\n  /** The color of the text for the primary button in your PaymentSheet, represented as a hex string with format #RRGGBB or #AARRGGBB.\n   * @default White or black, depending on the color of the button.\n   */\n  text: string;\n  /** The border color used for the primary button in your PaymentSheet, represented as a hex string with format #RRGGBB or #AARRGGBB.\n   * @default The System quaternary label on iOS, transparent on Android.\n   */\n  border: string;\n};\n\ntype RecursivePartial<T> = {\n  [P in keyof T]?: T[P] extends (infer U)[]\n    ? RecursivePartial<U>[]\n    : T[P] extends object\n    ? RecursivePartial<T[P]>\n    : T[P];\n};\nexport interface PaymentOption {\n  label: string;\n  image: string;\n}\n\nexport type PresentOptions = {\n  /** The number of milliseconds (after presenting) before the Payment Sheet closes automatically, at which point\n   *`presentPaymentSheet` will resolve with an `error.code` of `PaymentSheetError.Timeout`. The default is no timeout.\n   */\n  timeout?: number;\n};\n\nexport type BillingDetailsCollectionConfiguration = {\n  /** How to collect the name field. Defaults to `CollectionMode.automatic`. */\n  name?: CollectionMode;\n  /** How to collect the phone field. Defaults to `CollectionMode.automatic`. */\n  phone?: CollectionMode;\n  /** How to collect the email field. Defaults to `CollectionMode.automatic`. */\n  email?: CollectionMode;\n  /** How to collect the billing address. Defaults to `CollectionMode.automatic`. */\n  address?: AddressCollectionMode;\n  /** Whether the values included in `Configuration.defaultBillingDetails` should be attached to the payment method, this includes fields that aren't displayed in the form. If `false` (the default), those values will only be used to prefill the corresponding fields in the form. */\n  attachDefaultsToPaymentMethod?: Boolean;\n};\n\nexport enum CollectionMode {\n  /** The field may or may not be collected depending on the Payment Method's requirements. */\n  AUTOMATIC = 'automatic',\n  /** The field will never be collected. If this field is required by the Payment Method, you must provide it as part of `defaultBillingDetails`. */\n  NEVER = 'never',\n  /** The field will always be collected, even if it isn't required for the Payment Method. */\n  ALWAYS = 'always',\n}\n\nexport enum AddressCollectionMode {\n  /** Only the fields required by the Payment Method will be collected, which may be none. */\n  AUTOMATIC = 'automatic',\n  /** Billing address will never be collected. If the Payment Method requires a billing address, you must provide it as part of `defaultBillingDetails`. */\n  NEVER = 'never',\n  /** Collect the full billing address, regardless of the Payment Method's requirements. */\n  FULL = 'full',\n}\n\nexport type IntentCreationError = StripeError<'Failed'>;\n\nexport type IntentCreationCallbackParams =\n  | {\n      clientSecret: string;\n      error?: never;\n    }\n  | {\n      clientSecret?: never;\n      error: IntentCreationError;\n    };\n\nexport type IntentConfiguration = {\n  /*\n    Called when the customer confirms payment. Your implementation should create a PaymentIntent or SetupIntent on your server and call the `intentCreationCallback` with its client secret or an error if one occurred.\n    - Note: You must create the PaymentIntent or SetupIntent with the same values used as the `IntentConfiguration` e.g. the same amount, currency, etc.\n    - Parameters:\n      - paymentMethod: The PaymentMethod representing the customer's payment details.\n      - shouldSavePaymentMethod: This is `true` if the customer selected the \"Save this payment method for future use\" checkbox. Set `setup_future_usage` on the PaymentIntent to `off_session` if this is `true`.\n      - intentCreationCallback: Call this with the `client_secret` of the PaymentIntent or SetupIntent created by your server or the error that occurred. If you're using customFlow: false (default), the error's localizedMessage will be displayed to the customer in the sheet. If you're using customFlow: true, the `confirm` method fails with the error.\n  */\n  confirmHandler: (\n    paymentMethod: Result,\n    shouldSavePaymentMethod: boolean,\n    intentCreationCallback: (result: IntentCreationCallbackParams) => void\n  ) => void;\n  /* Information about the payment (PaymentIntent) or setup (SetupIntent).*/\n  mode: Mode;\n  /* A list of payment method types to display to the customer. If undefined or empty, we dynamically determine the payment methods using your Stripe Dashboard settings. */\n  paymentMethodTypes?: Array<string>;\n};\n\nexport type Mode = PaymentMode | SetupMode;\n\n/**\n * Controls when the funds will be captured. Seealso: https://stripe.com/docs/api/payment_intents/create#create_payment_intent-capture_method\n */\nexport enum CaptureMethod {\n  /** (Default) Stripe automatically captures funds when the customer authorizes the payment. */\n  Automatic = 'Automatic',\n  /** Place a hold on the funds when the customer authorizes the payment, but don’t capture the funds until later. (Not all payment methods support this.) */\n  Manual = 'Manual',\n  /** Asynchronously capture funds when the customer authorizes the payment.\n  - Note: Recommended over `CaptureMethod.Automatic` due to improved latency, but may require additional integration changes.\n  - Seealso: https://stripe.com/docs/payments/payment-intents/asynchronous-capture-automatic-async */\n  AutomaticAsync = 'AutomaticAsync',\n}\n\n/* Use this if your integration creates a PaymentIntent */\nexport type PaymentMode = {\n  /* Amount intended to be collected in the smallest currency unit (e.g. 100 cents to charge $1.00). Shown in Apple Pay, Google Pay, Buy now pay later UIs, the Pay button, and influences available payment methods.\n  Seealso: https://stripe.com/docs/api/payment_intents/create#create_payment_intent-amount */\n  amount: number;\n  /*  Three-letter ISO currency code. Filters out payment methods based on supported currency.\n  Seealso: https://stripe.com/docs/api/payment_intents/create#create_payment_intent-currency */\n  currencyCode: string;\n  /* Indicates that you intend to make future payments.\n  Seealso: https://stripe.com/docs/api/payment_intents/create#create_payment_intent-setup_future_usage */\n  setupFutureUsage?: FutureUsage;\n  /* Controls when the funds will be captured.\n  Seealso: https://stripe.com/docs/api/payment_intents/create#create_payment_intent-capture_method */\n  captureMethod?: CaptureMethod;\n};\n\n/* Use this if your integration creates a SetupIntent */\nexport type SetupMode = {\n  /*  Three-letter ISO currency code. Filters out payment methods based on supported currency.\n  Seealso: https://stripe.com/docs/api/payment_intents/create#create_payment_intent-currency */\n  currencyCode?: string;\n  /*  Indicates that you intend to make future payments.\n  Seealso: https://stripe.com/docs/api/payment_intents/create#create_payment_intent-setup_future_usage */\n  setupFutureUsage: FutureUsage;\n};\n"],"mappings":"8IA2TYA,eAAc,iDAAdA,cAAc,EAAdA,cAAc,0BAAdA,cAAc,kBAAdA,cAAc,uBAAdA,cAAc,0BAAdA,cAAc,SASdC,sBAAqB,+DAArBA,qBAAqB,EAArBA,qBAAqB,0BAArBA,qBAAqB,kBAArBA,qBAAqB,mBAArBA,qBAAqB,iCAArBA,qBAAqB,SA8CrBC,cAAa,+CAAbA,aAAa,EAAbA,aAAa,0BAAbA,aAAa,oBAAbA,aAAa,uCAAbA,aAAa,yBAAbA,aAAa"}